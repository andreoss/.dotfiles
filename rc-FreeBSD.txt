#!/bin/sh

doas sysrc keymap="us.ctrl.kbd"
doas sysrc clear_tmp_enable="YES"

doas sysrc wlans_iwm0="wlan0"
doas sysrc ifconfig_wlan0="WPA DHCP"

doas sysrc local_unbound_enable="YES"
doas sysrc sshd_enable="YES"
doas sysrc moused_enable="YES"
doas sysrc ntpd_enable="YES"
doas sysrc ntpd_sync_on_start="YES"
doas sysrc powerd_enable="YES"

doas sysrc dumpdev="NO"

doas sysrc background_dhclient="YES"

doas sysrc create_args_wlan0="wlanaddr a0:2b:67:05:75:7f country US"

doas sysrc procfs_enable="YES" 
doas sysrc hostid_enable="YES"
doas sysrc font8x8=YES
doas sysrc ipv6_activate_all_interfaces=NO

doas ./misc/edit.pl '^usb_quirk_load' 'usb_quirk_load="YES"' /boot/loader.conf

doas sysrc sndiod_enable="YES"

doas ./misc/edit.pl -flip 'cuse_load="YES"'        /boot/loader.conf
doas ./misc/edit.pl -flip 'if_urndis_load="YES"'   /boot/loader.conf
doas ./misc/edit.pl -flip 'if_cdce_load="YES"'     /boot/loader.conf
doas ./misc/edit.pl -flip 'if_ipheth_load="YES"'   /boot/loader.conf
doas ./misc/edit.pl -flip 'usb_quirk_load="YES"'   /boot/loader.conf

doas ./misc/edit.pl -flip 'ng_ubt_load="NO"'       /boot/loader.conf
doas ./misc/edit.pl -flip 'acpi_ibm_load="YES"'    /boot/loader.conf

doas ./misc/edit.pl -uncomment 'Banner none'       /etc/ssh/sshd_config 

doas rm -f /etc/motd.template 
doas rm -f /etc/motd
doas rm -f /var/run/motd
doas ln -s /dev/null /etc/motd.template 
doas ln -s /dev/null /etc/motd
doas ln -s /dev/null /var/run/motd

doas sysrc   update_motd="NO"
doas sysrc   sshd_enable="YES" 
doas service sshd restart

doas sysrc portmap_enable="NO" 
doas sysrc inetd_enable="NO"

doas sysrc kld_list+=i915kms

doas sysrc webcamd_enable="YES" 
doas sysrc devd_enable="YES"

doas pw groupmod webcamd -m a                               
doas pw groupmod video   -m a  


doas ./misc/edit.pl -flip 'vboxdrv_load="YES"'     /boot/loader.conf
doas sysrc vboxnet_enable="YES"
doas sysrc hald_enable="YES"
doas pw groupmod vboxusers -m a
doas pw groupmod operator  -m a

doas chown root:vboxusers /dev/vboxnetctl
doas chmod 0660 /dev/vboxnetctl

doas ./misc/edit.pl -uncomment 'own     vboxnetctl root:vboxusers' /etc/devfs.conf 
doas ./misc/edit.pl -uncomment 'perm    vboxnetctl 0660'           /etc/devfs.conf 
doas ./misc/edit.pl -uncomment 'perm cd* 0660'   /etc/devfs.conf 
doas ./misc/edit.pl -uncomment 'perm xpt0 0660'  /etc/devfs.conf 
doas ./misc/edit.pl -uncomment 'perm pass* 0660' /etc/devfs.conf 

doas touch /etc/devfs.rules 
doas ./misc/edit.pl -uncomment "[system=10]""\n""add path 'usb/*' mode 0660 group operator"           /etc/devfs.rules 

doas sysrc devfs_system_ruleset="system"
doas service devfs restart



doas sysrc gateway_enable=YES


doas ./misc/edit.pl -uncomment 'net.link.tap.up_on_open=1' /etc/sysctl.conf

doas sysrc rc_info="YES"
doas sysrc rc_startmsgs="YES"
doas sysrc ifconfig_lo0_alias0="inet 127.0.0.2 netmask 0xffffffff"
